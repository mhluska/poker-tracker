{"mappings":"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","sources":["src/utils.ts","src/lib/renderer/types.ts","src/lib/renderer/utils.ts","src/lib/renderer/useEffect.ts","src/lib/renderer/render.ts","src/types.ts","src/state/app.ts","src/components/App.ts","src/components/BlindsButton.ts","src/components/IntroScreen.ts","src/models/session.ts","src/selectors/app.ts","src/components/NewSessionScreen.ts","src/components/NumberInput.ts","src/decorators/session.ts","src/components/ShowSessionScreen.ts","src/components/TipsSection.ts","src/components/SuggestedCasino.ts","src/constants.ts","src/index.ts","src/services/api.ts"],"sourcesContent":["import { PlainObject, Primitive } from './types';\n\n// See https://stackoverflow.com/a/44078785/659910\nexport const uuid = () =>\n  Date.now().toString(36) + Math.random().toString(36).substring(2);\n\nexport const objectIsHtmlElement = (object: unknown): object is HTMLElement =>\n  !!(object as HTMLElement).tagName;\n\nexport const objectIsHtmlInputElement = (\n  object: unknown\n): object is HTMLInputElement => !!(object as HTMLInputElement).type;\n\nexport const formatDuration = (ms: number) => {\n  let seconds = ms / 1000;\n\n  const hours = Math.floor(seconds / 3600);\n  const minutes = Math.floor((seconds - hours * 3600) / 60);\n\n  seconds = Math.round(seconds - hours * 3600 - minutes * 60);\n\n  const hoursFormatted = hours < 10 ? `0${hours}` : hours.toString();\n  const minutesFormatted = minutes < 10 ? `0${minutes}` : minutes.toString();\n  const secondsFormatted = seconds < 10 ? `0${seconds}` : seconds.toString();\n\n  return `${hoursFormatted}:${minutesFormatted}:${secondsFormatted}`;\n};\n\nexport const isPlainObject = (object: unknown): object is PlainObject =>\n  typeof object === 'object' && !Array.isArray(object);\n\nexport const objectSet = (\n  object: PlainObject,\n  key: string,\n  value: Primitive\n) => {\n  if (!key) {\n    return;\n  }\n\n  const subKeys = key.split('.');\n  const lastKey = subKeys.pop();\n\n  if (!lastKey) {\n    return;\n  }\n\n  for (const key of subKeys) {\n    const next = object[key];\n    if (!isPlainObject(next)) {\n      return;\n    }\n\n    object = next;\n  }\n\n  object[lastKey] = value;\n};\n\nexport const capitalize = (str: string) =>\n  `${str[0].toUpperCase()}${str.slice(1)}`;\n\n// Works like `Date#toISOString()` but includes the client timezone.\n// See https://stackoverflow.com/a/17415677/659910\nexport const toISOString = (date: Date) => {\n  const tzo = -date.getTimezoneOffset();\n  const dif = tzo >= 0 ? '+' : '-';\n  const pad = (num: number) => (num < 10 ? '0' : '') + num;\n\n  return (\n    date.getFullYear() +\n    '-' +\n    pad(date.getMonth() + 1) +\n    '-' +\n    pad(date.getDate()) +\n    'T' +\n    pad(date.getHours()) +\n    ':' +\n    pad(date.getMinutes()) +\n    ':' +\n    pad(date.getSeconds()) +\n    dif +\n    pad(Math.floor(Math.abs(tzo) / 60)) +\n    ':' +\n    pad(Math.abs(tzo) % 60)\n  );\n};\n","export type Primitive = string | number | boolean | null | undefined;\n\nexport type Writeable<T> = { -readonly [P in keyof T]: T[P] };\n\nexport type ElementKeys = Writeable<\n  HTMLElementTagNameMap[keyof HTMLElementTagNameMap]\n>;\n\nexport type EventHandler = (this: HTMLElement, ev: Event) => void;\n\nexport type CustomProperties = {\n  onInput: EventHandler;\n  onClick: EventHandler;\n};\n\nexport type VirtualElementProps = Partial<ElementKeys & CustomProperties>;\n\nexport type VirtualNativeElement = {\n  type: keyof HTMLElementTagNameMap;\n  props: VirtualElementProps;\n  children: (null | VirtualElement)[];\n};\n\nexport type VirtualFunctionElement<Props = unknown> = {\n  type: FunctionComponent<Props>;\n  props: VirtualElementProps;\n  result: null | VirtualFunctionElement | VirtualNativeElement;\n};\n\nexport type VirtualStringElement = {\n  type: 'String';\n  value: string;\n};\n\nexport type VirtualElement<Props = unknown> =\n  | VirtualNativeElement\n  | VirtualFunctionElement<Props>\n  | VirtualStringElement;\n\nexport type FunctionComponent<Props = void> = Props extends void\n  ? () => null | VirtualNativeElement | VirtualFunctionElement<void>\n  : (\n      props: Props\n    ) => null | VirtualNativeElement | VirtualFunctionElement<Props>;\n\nexport type FC<Props> = FunctionComponent<Props>;\n\nexport enum NodeTypes {\n  Element = 1,\n  Text = 3,\n}\n","import {\n  Primitive,\n  VirtualElement,\n  VirtualFunctionElement,\n  VirtualStringElement,\n  VirtualNativeElement,\n  NodeTypes\n} from './types';\n\n// See https://github.com/microsoft/TypeScript/pull/12253#issuecomment-353494273\nexport const keys = Object.keys as <T>(o: T) => (keyof T)[];\n\nexport const isVirtualFunctionElement = (\n  virtualElement: VirtualElement\n): virtualElement is VirtualFunctionElement =>\n  typeof virtualElement.type === 'function';\n\nexport const isVirtualStringElement = (\n  virtualElement: VirtualElement\n): virtualElement is VirtualStringElement => virtualElement.type === 'String';\n\nexport const isVirtualNativeElement = (\n  virtualElement: VirtualElement\n): virtualElement is VirtualNativeElement =>\n  !isVirtualStringElement(virtualElement) &&\n  !isVirtualFunctionElement(virtualElement);\n\nexport const isElementNode = (node: Node): node is Element =>\n  node.nodeType === NodeTypes.Element;\n\nexport const isTextNode = (node: Node): node is Text =>\n  node.nodeType === NodeTypes.Text;\n\nexport const replaceNode = (\n  node: Text | Element,\n  newNode: Text | HTMLElement | null\n) => {\n  if (!newNode) {\n    return;\n  }\n\n  node.parentElement?.replaceChild(newNode, node);\n};\n\nexport const arraysEqual = (arr1: Primitive[], arr2: Primitive[]) => {\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n\n  for (let i = 0; i < arr1.length; i += 1) {\n    if (arr1[i] !== arr2[i]) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","import { Primitive, FunctionComponent, VirtualFunctionElement } from './types';\nimport { arraysEqual } from './utils';\n\ntype Effect = {\n  callback: () => void;\n  unmountCallback: void | (() => void);\n  dependencies: Primitive[];\n};\n\nconst effects = new Map<FunctionComponent<unknown>, Effect[]>();\nlet currentRenderEffects: Effect[] = [];\n\n// Calls callback if dependencies change between renders.\nexport const useEffect = (\n  callback: Effect['callback'],\n  dependencies: Effect['dependencies']\n) => {\n  currentRenderEffects.push({\n    callback,\n    dependencies,\n    unmountCallback: undefined,\n  });\n};\n\nexport const mountWithEffects = (virtualElement: VirtualFunctionElement) => {\n  const prevEffects = effects.get(virtualElement.type);\n\n  // Populates after calling the function component below.\n  currentRenderEffects = [];\n\n  virtualElement.result = virtualElement.type(virtualElement.props);\n\n  if (currentRenderEffects.length === 0) {\n    return virtualElement.result;\n  }\n\n  currentRenderEffects.forEach((nextEffect, index) => {\n    const prevEffect = prevEffects?.[index];\n\n    if (prevEffect && arraysEqual(prevEffect.dependencies, nextEffect.dependencies)) {\n      nextEffect.unmountCallback = prevEffect.unmountCallback;\n    } else {\n      nextEffect.unmountCallback = nextEffect.callback();\n    }\n  });\n\n  effects.set(virtualElement.type, currentRenderEffects);\n\n  return virtualElement.result;\n};\n\nexport const unmountWithEffects = (virtualElement: VirtualFunctionElement) => {\n  const componentEffects = effects.get(virtualElement.type);\n  if (!componentEffects) {\n    return virtualElement.result;\n  }\n\n  for (const { unmountCallback } of componentEffects) {\n    if (unmountCallback) {\n      unmountCallback();\n    }\n  }\n\n  effects.delete(virtualElement.type);\n\n  return virtualElement.result;\n}\n","import {\n  FunctionComponent,\n  ElementKeys,\n  CustomProperties,\n  VirtualStringElement,\n  VirtualElement,\n  VirtualFunctionElement,\n  VirtualElementProps,\n  VirtualNativeElement,\n  EventHandler,\n  NodeTypes,\n} from './types';\nimport {\n  keys,\n  isVirtualFunctionElement,\n  isVirtualNativeElement,\n  isTextNode,\n  isElementNode,\n  replaceNode,\n} from './utils';\nimport { mountWithEffects, unmountWithEffects } from './useEffect';\n\nenum ElementProperties {\n  Value = 'value',\n  ClassName = 'className',\n}\n\nconst ELEMENT_PROPERTIES = new Set<Partial<ElementKeys>>(\n  Object.values(ElementProperties)\n);\n\nconst EVENT_PROPS: Map<keyof CustomProperties, keyof HTMLElementEventMap> =\n  new Map([\n    ['onInput', 'input'],\n    ['onClick', 'click'],\n  ]);\n\nconst createVirtualElementString = (value: string): VirtualStringElement => ({\n  type: 'String',\n  value,\n});\n\nexport function createVirtualElement<Props, ChildProps>(\n  type: FunctionComponent<Props>,\n  props?: Props,\n  ...children: (null | string | VirtualElement<ChildProps>)[]\n): VirtualFunctionElement<Props>;\n\nexport function createVirtualElement<ChildProps>(\n  type: keyof HTMLElementTagNameMap,\n  props?: VirtualElementProps | null,\n  ...children: (null | string | VirtualElement<ChildProps>)[]\n): VirtualNativeElement;\n\nexport function createVirtualElement<Props, ChildProps>(\n  type: FunctionComponent<Props> | keyof HTMLElementTagNameMap,\n  props?: Props | VirtualElementProps | null,\n  ...children: (null | string | VirtualElement<ChildProps>)[]\n) {\n  return typeof type === 'function'\n    ? ({\n        type,\n        props: props || {},\n        result: null,\n      } as VirtualFunctionElement<Props>)\n    : ({\n        type,\n        props: {\n          ...props,\n          tagName: type || 'div',\n        },\n        children: children.map((child) =>\n          typeof child === 'string' ? createVirtualElementString(child) : child\n        ),\n      } as VirtualNativeElement);\n}\n\nexport const e = createVirtualElement;\n\nconst reconcileEventHandlerProps = (\n  domNode: Element,\n  nativeEventName: string,\n  prevValue: EventHandler | undefined,\n  newValue: EventHandler | undefined\n) => {\n  if (prevValue === newValue) {\n    return;\n  }\n\n  if (prevValue) {\n    domNode.removeEventListener(nativeEventName, prevValue);\n  }\n\n  if (newValue) {\n    domNode.addEventListener(nativeEventName, newValue);\n  }\n};\n\nconst reconcileProps = (\n  domNode: Element,\n  prevNode: VirtualElement | null,\n  newNode: VirtualElement | null\n) => {\n  if (prevNode?.type === 'String' || newNode?.type === 'String') {\n    return;\n  }\n\n  const prevPropKeys = prevNode ? keys(prevNode.props) : [];\n  const newPropKeys = newNode ? keys(newNode.props) : [];\n\n  for (const name of newPropKeys.concat(prevPropKeys)) {\n    const prevValue = prevNode?.props[name];\n    const newValue = newNode?.props[name];\n\n    // HACK: With properties (as opposed to attributes), our crappy virtal DOM\n    // can get out of sync after user input so we just always write.\n    if (ELEMENT_PROPERTIES.has(name)) {\n      // TODO: Fix type `Element` being too generic here.\n      // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n      // @ts-ignore\n      domNode[name] = newValue === undefined ? '' : newValue;\n      continue;\n    }\n\n    if (prevValue === newValue) {\n      continue;\n    }\n\n    if (name === 'onClick' || name === 'onInput') {\n      const nativeEventName = EVENT_PROPS.get(name);\n\n      if (nativeEventName) {\n        reconcileEventHandlerProps(\n          domNode,\n          nativeEventName,\n          prevNode?.props[name],\n          newNode?.props[name]\n        );\n      }\n\n      continue;\n    }\n\n    if (typeof newValue === 'boolean') {\n      if (newValue) {\n        domNode.setAttribute(name, '');\n      } else {\n        domNode.removeAttribute(name);\n      }\n    } else if (typeof newValue === 'undefined') {\n      domNode.removeAttribute(name);\n    } else {\n      domNode.setAttribute(name, String(newValue));\n    }\n  }\n};\n\nconst createDomNode = (\n  virtualElement: VirtualElement | null\n): Text | HTMLElement | null => {\n  if (!virtualElement) {\n    return null;\n  }\n\n  if (virtualElement.type === 'String') {\n    return document.createTextNode(virtualElement.value);\n  }\n\n  if (isVirtualFunctionElement(virtualElement)) {\n    return createDomNode(mountWithEffects(virtualElement));\n  }\n\n  const { children, type: tagName } = virtualElement;\n  const element = document.createElement(tagName);\n\n  reconcileProps(element, null, virtualElement);\n\n  for (const child of children) {\n    if (!child) {\n      continue;\n    }\n\n    const childDomElement = createDomNode(child);\n\n    if (!childDomElement) {\n      continue;\n    }\n\n    element.appendChild(childDomElement);\n  }\n\n  return element;\n};\n\nconst reconcileStrings = (\n  domNode: Element | Text,\n  prevNode: VirtualStringElement,\n  newNode: VirtualStringElement\n) => {\n  if (prevNode.value === newNode.value) {\n    return;\n  }\n\n  if (isElementNode(domNode)) {\n    replaceNode(domNode, createDomNode(newNode));\n  } else if (isTextNode(domNode)) {\n    domNode.replaceData(0, domNode.length, newNode.value);\n  }\n};\n\nexport const reconcile = (\n  domNode: Element | Text,\n  prevNode: VirtualElement | undefined | null,\n  newNode: VirtualElement | undefined | null\n) => {\n  if (!newNode) {\n    domNode.remove();\n    return;\n  }\n\n  if (!prevNode || prevNode.type !== newNode.type) {\n    if (prevNode && isVirtualFunctionElement(prevNode)) {\n      unmountWithEffects(prevNode);\n    }\n\n    replaceNode(domNode, createDomNode(newNode));\n    return;\n  }\n\n  // We needlessly have to repeatedly check the type of `prevNode` here even\n  // though we ensure that both types are the same above.\n  // See https://stackoverflow.com/questions/71397541\n  if (prevNode.type === 'String' && newNode.type === 'String') {\n    reconcileStrings(domNode, prevNode, newNode);\n    return;\n  }\n\n  if (isTextNode(domNode)) {\n    replaceNode(domNode, createDomNode(newNode));\n    return;\n  }\n\n  if (isVirtualFunctionElement(prevNode) && isVirtualFunctionElement(newNode)) {\n    reconcile(\n      domNode,\n      prevNode.result,\n      mountWithEffects(newNode)\n    );\n    return;\n  }\n\n  if (isVirtualNativeElement(prevNode) && isVirtualNativeElement(newNode)) {\n    reconcileProps(domNode, prevNode, newNode);\n\n    const domNodeChildren = Array.from(domNode.childNodes).filter(\n      (node) =>\n        node.nodeType === NodeTypes.Element || node.nodeType === NodeTypes.Text\n    ) as (Element | Text)[];\n\n    newNode.children.forEach((newNodeChild, index) => {\n      const domNodeChild = domNodeChildren[index];\n\n      if (domNodeChild) {\n        reconcile(domNodeChild, prevNode.children[index], newNodeChild);\n      } else if (newNodeChild) {\n        const node = createDomNode(newNodeChild);\n        if (node) {\n          domNode.appendChild(node);\n        }\n      }\n    });\n  }\n};\n\n// This should mimic the real appRoot node.\nlet prevVirtualElement: VirtualElement = createVirtualElement('div');\n\nexport const render = (\n  component: VirtualNativeElement | VirtualFunctionElement | null,\n  appRoot: HTMLElement | null\n) => {\n  if (!component) {\n    throw new Error('component is null');\n  }\n\n  if (!appRoot) {\n    throw new Error('appRoot is not set');\n  }\n\n  if (!appRoot.parentElement) {\n    throw new Error('appRoot not attached to DOM');\n  }\n\n  const virtualElement = createVirtualElement('div', null, component);\n\n  reconcile(appRoot, prevVirtualElement, virtualElement);\n\n  prevVirtualElement = virtualElement;\n};\n","export type Primitive = string | number | boolean | null | undefined;\n\nexport type PlainObject = {\n  [key: string]: Primitive | PlainObject | PlainObject[];\n};\n\nexport enum Environments {\n  Development = 'development',\n  Production = 'production',\n}\n\nexport enum Screen {\n  Intro = 'intro',\n  NewSession = 'new-session',\n  ShowSession = 'show-session',\n}\n","import { Screen } from '../types';\n\nconst LOCAL_STORAGE_KEY = 'pokerTracker';\n\ntype SessionAttributes = {\n  id: string;\n  startTime?: string;\n  endTime?: string;\n  casinoName: string;\n  smallBlind: number;\n  bigBlind: number;\n  maxBuyin: number;\n  notes: string;\n  cashoutAmount: number;\n  drinkTips: number;\n  dealerTips: number;\n  buyins: { amount: number; time: string }[];\n};\n\nexport type AppState = {\n  screen: Screen;\n  currentSessionId?: string;\n  sessions: { [id: string]: SessionAttributes };\n  showSessionScreen: {\n    rebuyAmount: string;\n    notes: string;\n    cashoutAmount: string;\n    adminPassword: string;\n    isSavingSession: boolean;\n  };\n  newSessionScreen: {\n    casinoName: string;\n    smallBlind: string;\n    bigBlind: string;\n    maxBuyin: string;\n  };\n  cachedAdminPassword?: string;\n};\n\nconst locationToSessionId = () => {\n  const sessionPath = window.location.hash.match(/#\\/sessions\\/(.+)/);\n\n  if (sessionPath) {\n    return sessionPath[1];\n  }\n};\n\nconst sessionIdToScreen = (sessionId?: string) => {\n  if (!sessionId) {\n    return Screen.Intro;\n  }\n\n  if (sessionId === 'new') {\n    return Screen.NewSession;\n  }\n\n  return Screen.ShowSession;\n};\n\nconst loadAppState = (): AppState => {\n  const stateItem = window.localStorage.getItem(LOCAL_STORAGE_KEY);\n  const state = stateItem ? JSON.parse(stateItem) : {};\n  const sessionId = locationToSessionId();\n\n  return {\n    screen: sessionIdToScreen(sessionId),\n    sessions: {},\n    currentSessionId: sessionId,\n    showSessionScreen: {\n      rebuyAmount: '',\n      notes: '',\n      cashoutAmount: '',\n      adminPassword: '',\n      isSavingSession: false,\n    },\n    newSessionScreen: {\n      casinoName: '',\n      smallBlind: '',\n      bigBlind: '',\n      maxBuyin: '',\n    },\n    ...state,\n  };\n};\n\nexport const state = {\n  app: loadAppState(),\n};\n\nexport const setupAppState = (onStateChange: () => void) => {\n  state.app = new Proxy(state.app, {\n    get(target, key, receiver) {\n      if (!Reflect.has(target, key)) {\n        return;\n      }\n\n      const value = Reflect.get(target, key, receiver);\n\n      if (typeof value === 'object' && value !== null) {\n        return new Proxy(value, this);\n      } else {\n        return value;\n      }\n    },\n\n    set(target, key, value, receiver) {\n      const success = Reflect.set(target, key, value, receiver);\n      if (success) {\n        onStateChange();\n      }\n      return success;\n    },\n  });\n\n  onStateChange();\n}\n\nexport const saveToLocalStorage = () => {\n  window.localStorage.setItem(\n    LOCAL_STORAGE_KEY,\n    JSON.stringify({\n      sessions: state.app.sessions,\n      // This is not very secure but I'm the only user of this hacky app.\n      // Long-term we would want JWT.\n      cachedAdminPassword: state.app.cachedAdminPassword,\n    })\n  );\n};\n","import { FunctionComponent, e } from '../lib/renderer';\nimport { IntroScreen, NewSessionScreen, ShowSessionScreen } from '.';\nimport { Screen } from '../types';\nimport { state } from '../state';\n\nexport const App: FunctionComponent = () => {\n  switch (state.app.screen) {\n    case Screen.Intro:\n      return e(IntroScreen);\n    case Screen.NewSession:\n      return e(NewSessionScreen);\n    case Screen.ShowSession:\n      return e(ShowSessionScreen);\n    default:\n      throw new Error(`Unknown screen ${state.app.screen}`);\n  }\n};\n","import { e, FunctionComponent } from '../lib/renderer';\n\ntype Props = {\n  smallBlind: number;\n  bigBlind: number;\n};\n\nexport const BlindsButton: FunctionComponent<Props> = ({\n  smallBlind,\n  bigBlind,\n}) =>\n  e(\n    'button',\n    {\n      type: 'button',\n      className: 'prefill-blinds',\n      'data-small-blind': smallBlind,\n      'data-big-blind': bigBlind,\n    },\n    `${smallBlind}/${bigBlind}`\n  );\n","import { e } from '../lib/renderer';\n\nexport const IntroScreen = () => (\n  e(\n    'div',\n    { id: 'intro-screen', className: 'screen' },\n    e('button', { id: 'new-session-button' }, 'Start Session')\n  )\n);\n","import { uuid, toISOString } from '../utils';\nimport { state } from '../state';\n\nexport class Session {\n  id: string;\n\n  static create(\n    casinoName: string,\n    smallBlind: number,\n    bigBlind: number,\n    maxBuyin: number,\n  ) {\n    const id = uuid();\n\n    state.app.sessions[id] = {\n      id: uuid(),\n      casinoName,\n      smallBlind,\n      bigBlind,\n      maxBuyin,\n      notes: '',\n      cashoutAmount: 0,\n      dealerTips: 0,\n      drinkTips: 0,\n      buyins: [],\n    };\n\n    return new this(id);\n  }\n\n  constructor(id: string) {\n    this.id = id;\n\n    if (!this.attributes) {\n      throw new Error(`Session ${id} does not exist`);\n    }\n  }\n\n  get attributes() {\n    return state.app.sessions[this.id];\n  }\n\n  get startTime() {\n    return this.attributes.startTime\n      ? new Date(this.attributes.startTime)\n      : null;\n  }\n\n  get endTime() {\n    return this.attributes.endTime ? new Date(this.attributes.endTime) : null;\n  }\n\n  start() {\n    if (this.startTime) {\n      throw new Error('Session already started');\n    }\n\n    if (this.endTime) {\n      throw new Error('Session already ended');\n    }\n\n    this.attributes.startTime = toISOString(new Date());\n    this.attributes.buyins.push({\n      amount: this.attributes.maxBuyin,\n      time: this.attributes.startTime,\n    });\n  }\n\n  rebuy(amount: number) {\n    this.attributes.buyins.push({\n      amount,\n      time: new Date().toISOString(),\n    });\n  }\n\n  rebuyMax() {\n    this.rebuy(this.attributes.maxBuyin);\n  }\n\n  end(cashoutAmount: number, notes: string) {\n    this.attributes.cashoutAmount = cashoutAmount;\n    this.attributes.endTime = toISOString(new Date());\n    this.attributes.notes = notes;\n  }\n\n  undoEnd() {\n    this.attributes.cashoutAmount = 0;\n    delete this.attributes.endTime;\n  }\n\n  buyinsTotal() {\n    return this.attributes.buyins.reduce(\n      (prev, current) => prev + current.amount,\n      0\n    );\n  }\n\n  updateTip(type: 'dealerTips' | 'drinkTips', change: number) {\n    if (this.attributes[type] + change < 0) {\n      return;\n    }\n\n    this.attributes[type] += change;\n  }\n\n  updateDealerTip(change: number) {\n    this.updateTip('dealerTips', change);\n  }\n\n  updateDrinkTip(change: number) {\n    this.updateTip('drinkTips', change);\n  }\n}\n","import { Session } from '../models';\nimport { state, AppState } from '../state';\n\n// TODO: Add automatic caching.\nclass Selectors {\n  appState: AppState;\n  _cachedCurrentSession?: Session;\n  _cachedCurrentSessionId?: string;\n  _cachedMostFrequentCasinoName?: string;\n\n  constructor(appState: AppState) {\n    this.appState = appState;\n  }\n\n  get currentSession() {\n    if (\n      this.appState.currentSessionId &&\n      this._cachedCurrentSessionId !== this.appState.currentSessionId\n    ) {\n      this._cachedCurrentSessionId = this.appState.currentSessionId;\n      this._cachedCurrentSession = new Session(this.appState.currentSessionId);\n    }\n\n    return this._cachedCurrentSession;\n  }\n\n  // TODO: Get this using a frecency algorithm.\n  get mostFrequentCasinoName() {\n    if (this._cachedMostFrequentCasinoName) {\n      return this._cachedMostFrequentCasinoName;\n    }\n\n    const casinoName = Object.values(this.appState.sessions)\n      .sort((a, b) =>\n        a.endTime && b.endTime\n          ? Date.parse(b.endTime) - Date.parse(a.endTime)\n          : 1\n      )[0]?.casinoName;\n\n    if (casinoName) {\n      this._cachedMostFrequentCasinoName = casinoName;\n    }\n\n    return casinoName;\n  }\n}\n\nexport const selectors = new Selectors(state.app);\n","import { e } from '../lib/renderer';\nimport { NumberInput, BlindsButton, SuggestedCasino } from '../components';\nimport { state } from '../state';\nimport { appSelectors } from '../selectors';\n\nexport const NewSessionScreen = () => {\n  const handleSelectSuggestedCasino = (casinoName: string) => {\n    state.app.newSessionScreen.casinoName = casinoName;\n  };\n\n  return e(\n    'div',\n    { id: 'new-session-screen', className: 'screen' },\n    e(SuggestedCasino, { onSelect: handleSelectSuggestedCasino }),\n    e(\n      'form',\n      { id: 'new-session-form' },\n      e(\n        'div',\n        null,\n        e(\n          'label',\n          null,\n          e('span', null, 'Casino Name'),\n          e('input', {\n            id: 'casino-name-input',\n            type: 'text',\n            placeholder: appSelectors.mostFrequentCasinoName ?? 'Bellagio',\n            required: true,\n            value: state.app.newSessionScreen.casinoName,\n          })\n        )\n      ),\n      e(\n        'div',\n        null,\n        e(\n          'label',\n          null,\n          e('span', null, 'Blinds'),\n          e(NumberInput, {\n            id: 'small-blind-input',\n            placeholder: '2',\n            value: state.app.newSessionScreen.smallBlind,\n            max: 100,\n          }),\n          e(NumberInput, {\n            id: 'big-blind-input',\n            placeholder: '5',\n            value: state.app.newSessionScreen.bigBlind,\n            max: 200,\n          })\n        ),\n        e(BlindsButton, { smallBlind: 1, bigBlind: 2 }),\n        e(BlindsButton, { smallBlind: 1, bigBlind: 3 }),\n        e(BlindsButton, { smallBlind: 2, bigBlind: 5 }),\n        e(BlindsButton, { smallBlind: 5, bigBlind: 10 })\n      ),\n      e(\n        'div',\n        null,\n        e(\n          'label',\n          null,\n          e('span', null, 'Max Buyin'),\n          e(NumberInput, {\n            id: 'max-buyin-input',\n            placeholder: '500',\n            value: state.app.newSessionScreen.maxBuyin,\n          })\n        )\n      ),\n      e('div', null, e('input', { type: 'submit', value: 'Start Session' }))\n    )\n  );\n};\n","import { e, FunctionComponent } from '../lib/renderer';\n\ntype Props = {\n  placeholder?: string;\n  id?: string;\n  value?: string;\n  min?: number;\n  max?: number;\n  onInput?: (event: Event) => void;\n};\n\nexport const NumberInput: FunctionComponent<Props> = ({\n  id,\n  placeholder,\n  value,\n  min = 1,\n  max,\n  onInput,\n}) =>\n  e('input', {\n    id,\n    type: 'number',\n    placeholder,\n    pattern: '\\\\d*',\n    value,\n    min,\n    max,\n    required: true,\n    onInput,\n  });\n","import { Session as SessionModel } from '../models';\nimport { formatDuration } from '../utils';\n\nexport class Session {\n  session: SessionModel;\n\n  constructor(session: SessionModel) {\n    this.session = session;\n  }\n\n  drinkTips() {\n    return `$${this.session.attributes.drinkTips ?? 0}`;\n  }\n\n  dealerTips() {\n    return `$${this.session.attributes.dealerTips ?? 0}`;\n  }\n\n  blinds() {\n    return `${this.session.attributes.smallBlind}/${this.session.attributes.bigBlind}`;\n  }\n\n  maxBuyin() {\n    return `$${this.session.attributes.maxBuyin} max`;\n  }\n\n  title() {\n    return [\n      this.session.attributes.casinoName,\n      this.blinds(),\n      this.maxBuyin(),\n    ].join(' ');\n  }\n\n  startTime() {\n    return this.session.startTime?.toLocaleString() ?? '';\n  }\n\n  profit() {\n    const cashoutAmount = this.session.attributes.cashoutAmount ?? 0;\n    return (cashoutAmount - this.session.buyinsTotal()).toString();\n  }\n\n  timeElapsed() {\n    if (!this.session.startTime) {\n      return '';\n    }\n\n    return formatDuration(Date.now() - this.session.startTime.getTime());\n  }\n}\n","import { e, useEffect, FunctionComponent } from '../lib/renderer';\nimport { NumberInput, TipsSection } from '../components';\nimport { Session as SessionDecorator } from '../decorators';\nimport { appSelectors } from '../selectors';\nimport { state } from '../state';\n\nexport const ShowSessionScreen: FunctionComponent = () => {\n  if (!appSelectors.currentSession) {\n    return null;\n  }\n\n  const session = new SessionDecorator(appSelectors.currentSession);\n\n  const handleNotesInput = (event: Event) => {\n    if (event.target) {\n      state.app.showSessionScreen.notes = (<HTMLInputElement>(\n        event.target\n      )).value;\n    }\n  };\n\n  const handleCashoutAmountInput = (event: Event) => {\n    if (event.target) {\n      state.app.showSessionScreen.cashoutAmount = (<HTMLInputElement>(\n        event.target\n      )).value;\n    }\n  };\n\n  useEffect(() => {\n    // HACK: Trigger a render every second to make time elapsed update. This\n    // can go away once we add local component state support with `useState`.\n    setInterval(() => {\n      const notes = state.app.showSessionScreen.notes;\n      state.app.showSessionScreen.notes = notes;\n    }, 1000);\n  }, []);\n\n  return e(\n    'div',\n    { id: 'show-session-screen', className: 'screen' },\n    e('h1', { id: 'session-title' }, session.title()),\n    e('div', null, e('span', null, `Profit: $${session.profit()}`)),\n    e('div', null, e('span', null, `Start time: $${session.startTime()}`)),\n    e('div', null, e('span', null, `Time elapsed: ${session.timeElapsed()}`)),\n\n    e(\n      'form',\n      { id: 'rebuy-form', className: 'section' },\n      e(NumberInput, {\n        id: 'rebuy-amount-input',\n        placeholder: appSelectors.currentSession.attributes.maxBuyin.toString(),\n        value: state.app.showSessionScreen.rebuyAmount,\n      }),\n      e('input', { type: 'submit', value: 'Rebuy' }),\n      e('input', { id: 'rebuy-max-button', type: 'button', value: 'Max' })\n    ),\n\n    e(TipsSection, { type: 'dealer', value: session.dealerTips() }),\n    e(TipsSection, { type: 'drink', value: session.drinkTips() }),\n\n    e(\n      'form',\n      { id: 'end-session-form', className: 'section' },\n      e('input', {\n        className: 'hidden',\n        type: 'text',\n        autocomplete: 'username',\n      }),\n\n      e(\n        'label',\n        { className: 'section' },\n        e('div', null, 'Notes'),\n        e('textarea', {\n          onInput: handleNotesInput,\n        })\n      ),\n\n      e(\n        'label',\n        { className: 'section' },\n        e('div', null, 'Cashout Amount'),\n        e(NumberInput, {\n          min: 0,\n          value: state.app.showSessionScreen.cashoutAmount,\n          placeholder: (\n            appSelectors.currentSession.attributes.maxBuyin * 3\n          ).toString(),\n          onInput: handleCashoutAmountInput,\n        })\n      ),\n\n      state.app.cachedAdminPassword\n        ? ''\n        : e(\n            'div',\n            { id: 'admin-password-area' },\n            e('label', null, e('span', null, 'Password')),\n            e('input', {\n              id: 'admin-password-input',\n              type: 'password',\n              autocomplete: 'current-password',\n              required: true,\n            })\n          ),\n\n      e('input', {\n        id: 'end-session-submit-button',\n        type: 'submit',\n        value: 'End Session',\n        disabled: state.app.showSessionScreen.isSavingSession,\n      })\n    )\n  );\n};\n","import { e, FunctionComponent } from '../lib/renderer';\nimport { capitalize } from '../utils';\n\ntype Props = {\n  type: 'dealer' | 'drink';\n  value: string;\n};\n\nexport const TipsSection: FunctionComponent<Props> = ({ type, value }) =>\n  e(\n    'div',\n    { className: 'section' },\n    e('span', null, `${capitalize(type)} tips: ${value}`),\n    e(\n      'div',\n      null,\n      e(\n        'button',\n        { className: 'tip-button', id: `decrement-${type}-tip-button` },\n        '-'\n      ),\n      e(\n        'button',\n        { className: 'tip-button', id: `increment-${type}-tip-button` },\n        '+'\n      )\n    )\n  );\n","import { e, FunctionComponent } from '../lib/renderer';\nimport { appSelectors } from '../selectors';\n\ntype Props = {\n  onSelect: (casinoName: string) => void;\n};\n\nexport const SuggestedCasino: FunctionComponent<Props> = ({ onSelect }) => {\n  const casinoName = appSelectors.mostFrequentCasinoName;\n  if (!casinoName) {\n    return null;\n  }\n\n  return e(\n    'div',\n    null,\n    `Play at ${casinoName} again?`,\n    e('button', { onClick: () => onSelect(casinoName) }, 'OK')\n  );\n};\n","import { Environments } from './types';\n\nconst getEnvironment = () => {\n  if (window.location.hostname === 'localhost') {\n    return Environments.Development;\n  } else {\n    return Environments.Production;\n  }\n};\n\nexport const environment = getEnvironment();\n","import {\n  objectIsHtmlElement,\n  objectIsHtmlInputElement,\n  objectSet,\n} from './utils';\nimport { App } from './components';\nimport { render, e } from './lib/renderer';\nimport { setupAppState } from './state';\nimport { Screen } from './types';\nimport { Api } from './services';\nimport { Session } from './models';\nimport { state, saveToLocalStorage } from './state';\nimport { appSelectors } from './selectors';\n\nconst SAVE_APP_STATE_INTERVAL_MS = 10 * 1000;\n\nconst navigateToIntroScreen = () => {\n  window.history.pushState({}, '', '#');\n  state.app.screen = Screen.Intro;\n};\n\nconst navigateToNewSessionScreen = () => {\n  window.history.pushState({}, '', '#/sessions/new');\n  state.app.screen = Screen.NewSession;\n};\n\nconst navigateToShowSessionScreen = (session: Session) => {\n  window.history.pushState({}, '', `#/sessions/${session.id}`);\n  state.app.currentSessionId = session.id;\n  state.app.screen = Screen.ShowSession;\n};\n\nconst rebuy = () => {\n  if (!appSelectors.currentSession) {\n    return;\n  }\n\n  appSelectors.currentSession.rebuy(\n    parseFloat(state.app.showSessionScreen.rebuyAmount)\n  );\n  state.app.showSessionScreen.rebuyAmount = '';\n};\n\nconst createSession = () => {\n  const session = Session.create(\n    state.app.newSessionScreen.casinoName,\n    parseInt(state.app.newSessionScreen.smallBlind),\n    parseInt(state.app.newSessionScreen.bigBlind),\n    parseInt(state.app.newSessionScreen.maxBuyin),\n  );\n\n  session.start();\n\n  navigateToShowSessionScreen(session);\n};\n\nconst saveToGoogleSheet = async () => {\n  if (!appSelectors.currentSession) {\n    return;\n  }\n\n  appSelectors.currentSession.end(\n    parseFloat(state.app.showSessionScreen.cashoutAmount),\n    state.app.showSessionScreen.notes\n  );\n\n  state.app.showSessionScreen.isSavingSession = true;\n\n  let response;\n\n  try {\n    response = await apiService.saveSession(\n      appSelectors.currentSession,\n      state.app.cachedAdminPassword ?? state.app.showSessionScreen.adminPassword\n    );\n  } finally {\n    state.app.showSessionScreen.isSavingSession = false;\n  }\n\n  if (response.ok) {\n    if (!state.app.cachedAdminPassword) {\n      state.app.cachedAdminPassword = state.app.showSessionScreen.adminPassword;\n    }\n\n    alert('Success!');\n    navigateToIntroScreen();\n  } else {\n    alert('Something went wrong.');\n\n    // TODO: Use changesets so we don't have to do this.\n    appSelectors.currentSession.undoEnd();\n  }\n};\n\nconst prefillBlinds = (smallBlind: string, bigBlind: string) => {\n  state.app.newSessionScreen.smallBlind = smallBlind;\n  state.app.newSessionScreen.bigBlind = bigBlind;\n};\n\nconst prefillMaxBuyin = (maxBuyin: string) => {\n  state.app.newSessionScreen.maxBuyin = maxBuyin;\n};\n\nconst handleClick = (event: Event) => {\n  if (!objectIsHtmlElement(event.target)) {\n    return;\n  }\n\n  switch (event.target.id) {\n    case 'new-session-button':\n      navigateToNewSessionScreen();\n      return;\n    case 'decrement-dealer-tip-button':\n      appSelectors.currentSession?.updateDealerTip(-1);\n      return;\n    case 'increment-dealer-tip-button':\n      appSelectors.currentSession?.updateDealerTip(1);\n      return;\n    case 'decrement-drink-tip-button':\n      appSelectors.currentSession?.updateDrinkTip(-1);\n      return;\n    case 'increment-drink-tip-button':\n      appSelectors.currentSession?.updateDrinkTip(1);\n      return;\n    case 'rebuy-max-button':\n      appSelectors.currentSession?.rebuyMax();\n      return;\n  }\n\n  if (\n    event.target.classList.contains('prefill-blinds') &&\n    event.target.dataset.smallBlind &&\n    event.target.dataset.bigBlind\n  ) {\n    prefillBlinds(\n      event.target.dataset.smallBlind,\n      event.target.dataset.bigBlind\n    );\n\n    prefillMaxBuyin((parseInt(event.target.dataset.bigBlind) * 100).toString());\n  }\n};\n\nconst handleSubmit = (event: Event) => {\n  if (!objectIsHtmlElement(event.target)) {\n    return;\n  }\n\n  event.preventDefault();\n\n  switch (event.target.id) {\n    case 'new-session-form':\n      createSession();\n      break;\n    case 'rebuy-form':\n      rebuy();\n      break;\n    case 'end-session-form':\n      saveToGoogleSheet();\n      break;\n  }\n};\n\nconst handleInput = (event: Event) => {\n  if (!objectIsHtmlInputElement(event.target)) {\n    return;\n  }\n\n  const idToStateKey = (id: string) => {\n    switch (id) {\n      case 'casino-name-input':\n        return 'newSessionScreen.casinoName';\n      case 'small-blind-input':\n        return 'newSessionScreen.smallBlind';\n      case 'big-blind-input':\n        return 'newSessionScreen.bigBlind';\n      case 'max-buyin-input':\n        return 'newSessionScreen.maxBuyin';\n      case 'max-players-input':\n        return 'newSessionScreen.maxPlayers';\n      case 'rebuy-amount-input':\n        return 'showSessionScreen.rebuyAmount';\n      case 'admin-password-input':\n        return 'showSessionScreen.adminPassword';\n    }\n  };\n\n  const key = idToStateKey(event.target.id);\n  if (!key) {\n    return;\n  }\n\n  return objectSet(state.app, key, event.target.value);\n};\n\nconst apiService = new Api();\nconst appRoot = document.getElementById('root');\n\nif (appRoot) {\n  setupAppState(() => render(e(App), appRoot));\n\n  appRoot.addEventListener('click', handleClick);\n  appRoot.addEventListener('submit', handleSubmit);\n  appRoot.addEventListener('input', handleInput);\n}\n\n// HACK: onbeforeunload doesn't seem to work on iOS so we save periodically.\nsetInterval(saveToLocalStorage, SAVE_APP_STATE_INTERVAL_MS);\ndocument.addEventListener('visibilitychange', saveToLocalStorage);\n\nwindow.onbeforeunload = saveToLocalStorage;\n","import { Environments } from '../types';\nimport { Session } from '../models';\nimport { environment } from '../constants';\n\nexport class Api {\n  origin() {\n    if (environment === Environments.Development) {\n      return 'http://localhost:3000';\n    } else {\n      return 'https://blackjack-trainer-api.herokuapp.com';\n    }\n  }\n\n  request(path: string, body: unknown, requestOptions: RequestInit) {\n    const url = `${this.origin()}/api/v1${path}`;\n\n    return window.fetch(url, {\n      method: requestOptions.method,\n      headers: {\n        ...requestOptions.headers,\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify(body),\n    });\n  }\n\n  post(path: string, body: unknown, requestOptions: RequestInit) {\n    return this.request(path, body, { method: 'POST', ...requestOptions });\n  }\n\n  saveSession(session: Session, adminPassword: string) {\n    return this.post(\n      '/poker_sessions',\n      {\n        data: {\n          type: 'poker_session',\n          attributes: session.attributes,\n        },\n      },\n      {\n        headers: {\n          'Poker-Sessions-Admin-Password': adminPassword,\n        },\n      }\n    );\n  }\n}\n"],"names":["$df5bef30413a053b$export$31b40729666a4ae0","Date","now","toString","Math","random","substring","$df5bef30413a053b$export$c26d41fa6f97693c","object","tagName","$df5bef30413a053b$export$53b83ca8eaab0383","Array","isArray","$df5bef30413a053b$export$dfaaa8705752128f","date","tzo","getTimezoneOffset","dif","pad","num","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","floor","abs","$c533ba33b823fc3c$export$2ed9472effad1b70","$599b053ec5c6aab6$export$ed97f33186d4b816","Object","keys","$599b053ec5c6aab6$export$1f142f2b4209d4fb","virtualElement","type","$599b053ec5c6aab6$export$c3bf1ddc270d7633","$599b053ec5c6aab6$export$8e6ee0da8e48457","$599b053ec5c6aab6$export$ccbedd67ef6e9417","node","nodeType","Text","$599b053ec5c6aab6$export$5542201de9311ab2","newNode","parentElement","replaceChild","$1bd93be974497eab$var$effects","Map","$1bd93be974497eab$var$currentRenderEffects","$1bd93be974497eab$export$badad71efe5b2061","prevEffects","get","result","props","length","forEach","nextEffect","index","prevEffect","arr1","arr2","i","$599b053ec5c6aab6$export$234180f8206db11b","dependencies","unmountCallback","callback","set","$c7d33fbfd6a74191$var$ElementProperties","ElementProperties","$c7d33fbfd6a74191$var$ELEMENT_PROPERTIES","Set","values","$c7d33fbfd6a74191$var$EVENT_PROPS","$c7d33fbfd6a74191$export$e1e7a9dd34b01909","children","map","child","value","$c7d33fbfd6a74191$export$f1e1789686576879","$c7d33fbfd6a74191$var$reconcileEventHandlerProps","domNode","nativeEventName","prevValue","newValue","removeEventListener","addEventListener","$c7d33fbfd6a74191$var$reconcileProps","prevNode","prevPropKeys","newPropKeys","name","concat","has","undefined","setAttribute","removeAttribute","String","$c7d33fbfd6a74191$var$createDomNode","document","createTextNode","element","createElement","childDomElement","appendChild","$c7d33fbfd6a74191$var$reconcileStrings","Element","replaceData","$c7d33fbfd6a74191$export$38319cad1f6d89e0","componentEffects","delete","$1bd93be974497eab$export$5c13eb90b0f4acc1","domNodeChildren","from","childNodes","filter","newNodeChild","domNodeChild","remove","$c7d33fbfd6a74191$var$prevVirtualElement","$25746eb61037a613$export$56edef3a554a6277","$25746eb61037a613$export$a98515d67472a41f","$799ee1075ebfd49a$var$sessionIdToScreen","sessionId","NewSession","ShowSession","Intro","$799ee1075ebfd49a$export$ca000e230c0caa3e","app","stateItem","window","localStorage","getItem","JSON","parse","sessionPath","location","hash","match","$799ee1075ebfd49a$var$locationToSessionId","screen","sessions","currentSessionId","showSessionScreen","rebuyAmount","notes","cashoutAmount","adminPassword","isSavingSession","newSessionScreen","casinoName","smallBlind","bigBlind","maxBuyin","$799ee1075ebfd49a$var$loadAppState","$799ee1075ebfd49a$export$834fe5a6d8a9c67","onStateChange","Proxy","target","key","receiver","Reflect","this","success","$799ee1075ebfd49a$export$1b8cd2d0ef9a8e5d","setItem","stringify","cachedAdminPassword","$a8e11eb2b4b0680a$export$86fbec116b87613f","$bfeb9d294d2ffc5c$export$327f2520b4698e84","$743ad4309d0f81b7$export$4f569ff5903d61c2","$be31a638e58516f0$export$596affaadba118e1","Error","$9ceabd904cf08d06$export$d7c54a71f8909529","className","id","$959c11b99bd453e0$export$1fb4852a55678982","static","dealerTips","drinkTips","buyins","constructor","attributes","startTime","endTime","start","push","amount","time","rebuy","toISOString","rebuyMax","end","undoEnd","buyinsTotal","reduce","prev","current","updateTip","change","updateDealerTip","updateDrinkTip","$564d17351e22afa3$export$e1252723db1c541","appState","currentSession","_cachedCurrentSessionId","_cachedCurrentSession","mostFrequentCasinoName","_cachedMostFrequentCasinoName","sort","a","b","$2b416257742c2bf1$export$eb1a1d9ee2289a71","onSelect","placeholder","required","$7a7cb71cad4059ea$export$6bf0cd3a219bbade","max","min","onInput","pattern","$e7e206ea4712806d$export$1fb4852a55678982","session","blinds","title","join","toLocaleString","profit","timeElapsed","ms","seconds","hours","minutes","round","$df5bef30413a053b$export$bc733b0c5cbb3e8a","getTime","setInterval","$fdb14842a1041c3a$export$1e4a816d3f9032b4","autocomplete","event","disabled","str","toUpperCase","slice","onClick","$9ecda7333d28e490$export$6bc7b24d4e862158","hostname","Development","Production","$b4e14b6b8da86996$var$createSession","create","parseInt","history","pushState","$b4e14b6b8da86996$var$navigateToShowSessionScreen","$b4e14b6b8da86996$var$saveToGoogleSheet","async","response","parseFloat","$b4e14b6b8da86996$var$apiService","saveSession","ok","alert","$b4e14b6b8da86996$var$handleClick","classList","contains","dataset","$b4e14b6b8da86996$var$handleSubmit","preventDefault","$b4e14b6b8da86996$var$handleInput","idToStateKey","subKeys","split","lastKey","pop","key1","next","$df5bef30413a053b$export$b6497f19c886af0e","origin","request","path","body","requestOptions","url","fetch","method","headers","post","data","$b4e14b6b8da86996$var$appRoot","getElementById","component","appRoot","$c7d33fbfd6a74191$export$b3890eb0ae9dca99","onbeforeunload"],"version":3,"file":"index.396ca17b.js.map"}